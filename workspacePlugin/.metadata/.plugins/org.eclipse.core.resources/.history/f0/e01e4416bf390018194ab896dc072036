package fr.leroideskiwis.modoplugin.listeners;

import org.bukkit.BanList;
import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.event.player.PlayerQuitEvent;
import org.bukkit.scheduler.BukkitRunnable;
import org.bukkit.scoreboard.Scoreboard;

import fr.leroideskiwis.modoplugin.Main;
import fr.leroideskiwis.modoplugin.utils.SpigotUtils;


public class JoinQuitEvent implements Listener {

	private SpigotUtils utils = new SpigotUtils(Main.getInstance());
	
	@EventHandler
	public void onQuit(PlayerQuitEvent e){
		
		if(Main.getInstance().freezes.contains(e.getPlayer())){
			
			Bukkit.getBanList(BanList.Type.NAME).addBan(e.getPlayer().getName(), "Quitte pendant freeze", null, null);
			
		}
		
	}
	
	@EventHandler
	public void DisableCollisions(PlayerJoinEvent e){
		
		
		
	}
	
	@EventHandler
	public void onJoin(PlayerJoinEvent e){
		
		Player p = e.getPlayer();
		
		if(!e.getPlayer().isOp()) e.getPlayer().teleport(e.getPlayer().getWorld().getSpawnLocation());
		
		new BukkitRunnable(){
		
			public void run(){
				utils.sendTitle(e.getPlayer(), "§6Bienvenue", "§7Regarde ton tchat");
		
				p.sendMessage("");
				p.sendMessage("");
				p.sendMessage("§6Informations :");
				p.sendMessage("");
				p.sendMessage("§aBonjour et bienvenue, tu est sur un serveur privé ou je test mes plugins :D. Voila c'était une tres courte presentation ! Allez tchao ! \n\n§5Le discord : https://discord.gg/7CFs8XH");
				p.sendMessage("");
				p.sendMessage("");
			}
		}.runTaskLater(Main.getInstance(), 20);
		
	}
	
}
